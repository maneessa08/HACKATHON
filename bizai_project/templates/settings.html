<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Business Dashboard</title>

<!-- External CSS -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='financial.css') }}">
</head>

<body>
<div class="container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="logo-section">
            <img src="/static/Image/optiviz.jpeg" alt="Optiviz AI Logo">
            <span class="menu-icon" id="menu-toggle">&#9776;</span>
        </div>
        <p class="section-title">General</p>
        <a href="{{ url_for('home') }}" class="menu-item"><i class="fas fa-chart-line"></i> Dashboard</a>
       <a href="{{ url_for('financial') }}" class="menu-item menu-item-analytics"><i class="fas fa-chart-pie"></i> Financial Analytics</a>
       <a href="{{ url_for('invoice') }}" class="menu-item menu-item-invoice"><i class="fas fa-file-invoice"></i> Invoice</a>
       <a href="{{ url_for('settings') }}" class="menu-item menu-item-settings"><i class="fas fa-cog"></i> Settings</a>
       <a href="{{ url_for('signout') }}" class="menu-item"><i class="fas fa-sign-out-alt"></i> Logout</a>

    </aside>

    <!-- Main Content Area -->
    <main class="main-content" id="main-content">
        <section class="content" id="dynamic-content">
            <!-- Content will be loaded here by JS -->
        </section>
    </main>
</div>
       

<!-- jQuery + jQuery UI -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!--newly added code- ai analytics-->
<script src="script.js"></script> 

<script>



// Sidebar toggle
document.getElementById("menu-toggle")?.addEventListener("click", function() {
    document.getElementById("sidebar").classList.toggle("collapsed");
    document.getElementById("main-content").classList.toggle("collapsed");
});

// Settings
$(".menu-item-settings").click(function(e){
    e.preventDefault();
    loadSettings();
});

function loadSettings() {
    $("#dynamic-content").html(`
        <h2>‚öôÔ∏è Settings</h2>
        <div class="setting">
          <h3>üåó Theme</h3>
          <label class="switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
          </label>
          <span id="theme-label">Light Mode</span>
        </div>
        <div class="setting"><h3>üåç Language</h3><p>English (Default)</p></div>
        <div class="setting">
          <h3>üîî Notifications</h3>
          <p>Email Alerts: <label class="switch"><input type="checkbox" id="email-toggle" checked><span class="slider"></span></label></p>
          <p>In-App Alerts: <label class="switch"><input type="checkbox" id="app-toggle"><span class="slider"></span></label></p>
        </div>
        <div class="setting"><h3>‚ôªÔ∏è Reset Settings</h3><button class="reset-btn" id="resetBtn">Reset to Default</button></div>
    `);

    const main = document.getElementById("main-content");
    const themeToggle = document.getElementById("theme-toggle");
    const themeLabel = document.getElementById("theme-label");
    const resetBtn = document.getElementById("resetBtn");

    themeToggle?.addEventListener("change", () => {
        main.classList.toggle("dark-mode");
        themeLabel.textContent = main.classList.contains("dark-mode") ? "Dark Mode" : "Light Mode";
    });

    resetBtn?.addEventListener("click", () => {
        if(confirm("Reset all settings to default?")) {
            main.classList.remove("dark-mode");
            themeToggle.checked = false;
            themeLabel.textContent = "Light Mode";
            document.getElementById("email-toggle").checked = true;
            document.getElementById("app-toggle").checked = false;
            alert("‚úÖ Settings reset to default!");
        }
    });
}
</script>
</body>
</html>
